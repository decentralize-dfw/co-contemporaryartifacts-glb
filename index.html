<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Status Co. | Contemporary Artifacts</title>

    <!-- Comfortaa Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Granim.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/granim/2.0.0/granim.min.js"></script>

    <style>
        body {
            font-family: 'Comfortaa', cursive;
            margin: 0;
            padding: 0;
            color: #111;
            overflow-x: hidden;
            background-color: #1a0b2e;
        }

        /* SCROLLBAR GİZLEME */
        html, body {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        ::-webkit-scrollbar { display: none; }

        /* LOADER EKRANI - Gradient Arka Plan */
        #loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0d0417 0%, #1a0b2e 25%, #2E0E4A 50%, #664B9E 75%, #1a0b2e 100%);
            background-size: 400% 400%;
            animation: loaderGradient 3s ease infinite;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease;
        }

        @keyframes loaderGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Dairesel Progress - Gradient Stroke */
        .progress-ring__circle {
            transition: stroke-dashoffset 0.15s ease-out;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .progress-ring__bg {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* 1. ARKA PLAN (Granim Canvas) */
        #granim-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            height: var(--app-height, 100vh);
            z-index: -3;
        }

        #bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            height: var(--app-height, 100vh);
            z-index: -2;
            background: radial-gradient(ellipse at center, transparent 10%, rgba(10, 5, 20, 0.4) 60%, rgba(10, 5, 20, 0.8) 100%);
            pointer-events: none;
        }

        /* 2. GIF LAYER */
        #gif-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            height: var(--app-height, 100vh);
            z-index: -1;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        #main-gif {
            display: block;
            opacity: 0;
            transition: opacity 1.0s ease;
        }

        #frozen-canvas {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        @media (min-width: 769px) {
            #main-gif, #frozen-canvas {
                height: 100%;
                width: auto;
                max-width: none;
                object-fit: contain;
            }
        }

        @media (max-width: 768px) {
            #main-gif, #frozen-canvas {
                width: 100%;
                height: auto;
                max-height: 80vh;
                object-fit: contain;
            }
        }

        /* 3. BLUR & UI */
        #blur-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            height: var(--app-height, 100vh);
            z-index: 5;
            pointer-events: none;
            backdrop-filter: blur(0px);
            -webkit-backdrop-filter: blur(0px);
            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 30%, black 100%);
            mask-image: linear-gradient(to bottom, transparent 0%, black 30%, black 100%);
        }

        .reveal-element {
            opacity: 0;
            transform: translateY(30px);
            transition: all 1.0s ease-out;
        }
        .reveal-element.visible {
            opacity: 1;
            transform: translateY(0);
        }

        #scroll-indicator-container {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 50;
            transition: opacity 0.8s ease, visibility 0.8s ease;
            pointer-events: none;
        }

        /* Scroll kilitli sınıfı */
        .stop-scrolling {
            height: 100%;
            overflow: hidden;
        }
    </style>
</head>
<body class="w-full stop-scrolling">

    <!-- LOADER - Gradient Dairesel Progress -->
    <div id="loader-overlay">
        <div class="relative w-40 h-40 flex items-center justify-center">
            <svg class="progress-ring" width="160" height="160" viewBox="0 0 160 160">
                <defs>
                    <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#BCA6D1"/>
                        <stop offset="50%" stop-color="#664B9E"/>
                        <stop offset="100%" stop-color="#2E0E4A"/>
                    </linearGradient>
                </defs>
                <circle
                    class="progress-ring__bg"
                    stroke="rgba(255,255,255,0.08)"
                    stroke-width="3"
                    fill="transparent"
                    r="70"
                    cx="80"
                    cy="80"
                />
                <circle
                    id="progress-indicator"
                    class="progress-ring__circle"
                    stroke="url(#progressGradient)"
                    stroke-width="3"
                    stroke-linecap="round"
                    fill="transparent"
                    r="70"
                    cx="80"
                    cy="80"
                    style="stroke-dasharray: 439.82; stroke-dashoffset: 439.82;"
                />
            </svg>
            <div class="absolute flex flex-col items-center">
                <span id="loader-text" class="text-white font-bold text-2xl tracking-wider">0%</span>
            </div>
        </div>
        <div class="mt-6 text-white/40 text-[10px] tracking-[0.4em] uppercase">Contemporary Artifacts</div>
    </div>

    <!-- 1. GRANIM ARKA PLAN -->
    <canvas id="granim-canvas"></canvas>
    <div id="bg-overlay"></div>

    <!-- 2. GIF -->
    <div id="gif-layer">
        <img id="main-gif" alt="Animated Logo" crossorigin="anonymous" />
        <canvas id="frozen-canvas"></canvas>
    </div>

    <!-- 3. BLUR -->
    <div id="blur-layer"></div>

    <!-- 4. UI -->
    <div id="scroll-indicator-container" class="text-[9px] tracking-widest uppercase font-bold text-white/70 drop-shadow-md">
        Scroll
    </div>

    <div class="relative z-10 w-full" id="main-content" style="opacity: 0; transition: opacity 1s ease;">
        <div class="w-full h-[80vh] md:h-screen"></div>

        <section id="textContent" class="w-full flex flex-col items-center justify-center px-2 md:px-0 relative pb-20">
            <div class="absolute inset-0 bg-transparent pointer-events-none"
                 style="background: radial-gradient(circle at center, rgba(0,0,0,0.2) 0%, transparent 70%);">
            </div>

            <div class="max-w-2xl text-center reveal-element relative z-20 mix-blend-screen px-4 md:px-4 mt-10 md:mt-0">
                <h1 id="mainTitle" class="flex flex-col items-center justify-center text-white drop-shadow-xl mb-6 md:mb-10">
                    <span class="text-3xl md:text-5xl font-bold tracking-widest uppercase leading-tight">
                        STATUS CO.
                    </span>
                    <span class="text-lg md:text-3xl font-light italic tracking-wide uppercase mt-2 md:mt-4 text-purple-100">
                        CONTEMPORARY ARTIFACTS
                    </span>
                    <span class="text-[10px] md:text-xs font-light tracking-[0.4em] uppercase mt-3 md:mt-6 opacity-80 border-t border-white/30 pt-2">
                        DROP 1
                    </span>
                </h1>

                <div class="text-[12px] md:text-[16px] leading-6 md:leading-8 space-y-4 md:space-y-6 text-gray-100 font-medium drop-shadow-md">
                    <p>
                        Status Co. operates as a curation platform where the distinction between daily objects and art is reimagined.
                        Functional designs, crafted in artist studios, are released through a series of limited "drops."
                    </p>
                    <p>
                        The inaugural collection, "Contemporary Artifacts," presents a selection where form and function converge. In this series, vases with unconventional silhouettes, tactile rugs that transform spatial perception, and stools serving as sculptural interpretations of seating are featured.
                    </p>
                </div>

                <div class="w-12 md:w-20 h-[1px] bg-white mx-auto mt-8 md:mt-12 opacity-50"></div>

                <div class="mt-6 md:mt-10 flex justify-center">
                    <a href="https://instagram.com" target="_blank" rel="noopener noreferrer" class="insta-icon text-white" aria-label="Instagram">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 md:w-7 md:h-7" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg>
                    </a>
                </div>
            </div>
        </section>
    </div>

    <script>
        // --- 1. LOADER & GIF SYSTEM ---
        const gifUrl = "https://raw.githubusercontent.com/decentralize-dfw/co-contemporaryartifacts-glb/main/animated-logo-5sec.gif";
        const progressCircle = document.getElementById('progress-indicator');
        const loaderText = document.getElementById('loader-text');
        const loaderOverlay = document.getElementById('loader-overlay');
        const gifImg = document.getElementById('main-gif');
        const frozenCanvas = document.getElementById('frozen-canvas');
        const mainContent = document.getElementById('main-content');

        const circumference = 439.82;
        let isLoaded = false;
        let gifFrozen = false;
        let blobUrl = null;

        // Frozen canvas başta gizli
        frozenCanvas.style.display = 'none';

        // GIF'i indir
        const xhr = new XMLHttpRequest();
        xhr.open('GET', gifUrl, true);
        xhr.responseType = 'blob';

        xhr.onprogress = function(e) {
            if (e.lengthComputable) {
                const percent = Math.round((e.loaded / e.total) * 100);
                setProgress(percent);
            }
        };

        xhr.onload = function() {
            if (this.status === 200) {
                const blob = this.response;
                blobUrl = URL.createObjectURL(blob);

                gifImg.onload = function() {
                    isLoaded = true;
                    finishLoading();

                    // 14 saniye sonra DONDUR
                    setTimeout(freezeGif, 14000);
                };

                gifImg.src = blobUrl;
            }
        };

        xhr.send();

        function setProgress(percent) {
            const offset = circumference - (percent / 100) * circumference;
            progressCircle.style.strokeDashoffset = offset;
            loaderText.innerText = `${percent}%`;
        }

        function finishLoading() {
            document.body.classList.remove('stop-scrolling');

            loaderOverlay.style.opacity = '0';
            setTimeout(() => {
                loaderOverlay.style.display = 'none';
            }, 800);

            gifImg.style.opacity = '1';
            mainContent.style.opacity = '1';
        }

        function freezeGif() {
            if (gifFrozen) return;
            gifFrozen = true;

            try {
                const naturalW = gifImg.naturalWidth;
                const naturalH = gifImg.naturalHeight;

                if (!naturalW || !naturalH) {
                    console.error("GIF boyutları alınamadı");
                    return;
                }

                // Canvas boyutlarını ayarla
                frozenCanvas.width = naturalW;
                frozenCanvas.height = naturalH;

                // GIF'in ekrandaki boyutlarını al
                const gifRect = gifImg.getBoundingClientRect();

                // Canvas'ı GIF ile aynı boyutta yap
                frozenCanvas.style.width = gifRect.width + 'px';
                frozenCanvas.style.height = gifRect.height + 'px';

                // Son frame'i canvas'a çiz
                const ctx = frozenCanvas.getContext('2d');
                ctx.drawImage(gifImg, 0, 0, naturalW, naturalH);

                // Canvas'ı göster
                frozenCanvas.style.display = 'block';
                frozenCanvas.style.opacity = '1';

                // GIF'i TAMAMEN öldür - src'yi temizle, DOM'dan gizle
                gifImg.style.opacity = '0';
                gifImg.style.display = 'none';
                gifImg.src = ''; // SRC'yi temizle - loop dursun

                // Blob URL'i temizle
                if (blobUrl) {
                    URL.revokeObjectURL(blobUrl);
                    blobUrl = null;
                }

                console.log("GIF DONDURULDU - Son frame canvas'ta.");

                // Resize olduğunda canvas'ı da resize et
                window.addEventListener('resize', resizeFrozenCanvas);

            } catch (e) {
                console.error("Freeze error:", e);
            }
        }

        function resizeFrozenCanvas() {
            if (!gifFrozen) return;

            // Ekran boyutuna göre canvas'ı ölçekle
            const windowHeight = window.innerHeight;
            const windowWidth = window.innerWidth;

            const canvasRatio = frozenCanvas.width / frozenCanvas.height;

            let newWidth, newHeight;

            if (window.innerWidth >= 769) {
                // Desktop: Yüksekliğe göre ölçekle
                newHeight = windowHeight;
                newWidth = windowHeight * canvasRatio;
            } else {
                // Mobile: Genişliğe göre ölçekle
                newWidth = windowWidth;
                newHeight = windowWidth / canvasRatio;

                if (newHeight > windowHeight * 0.8) {
                    newHeight = windowHeight * 0.8;
                    newWidth = newHeight * canvasRatio;
                }
            }

            frozenCanvas.style.width = newWidth + 'px';
            frozenCanvas.style.height = newHeight + 'px';
        }


        // --- 2. GRANIM.JS BACKGROUND ---
        // Renkler: #2E0E4A (koyu), #664B9E (orta), #BCA6D1 (açık - %27-35 ağırlık)
        var granimInstance = new Granim({
            element: '#granim-canvas',
            direction: 'diagonal',
            isPausedWhenNotInView: true,
            stateTransitionSpeed: 1000,
            states: {
                "default-state": {
                    gradients: [
                        // Koyu tonlar ağırlıklı (%65-73), açık ton az (%27-35)
                        ['#2E0E4A', '#3d1a5c'],
                        ['#3d1a5c', '#664B9E'],
                        ['#664B9E', '#4a2d7a'],
                        ['#4a2d7a', '#2E0E4A'],
                        ['#2E0E4A', '#553d7d'],
                        ['#553d7d', '#7a5aa0'], // Açık tona yaklaşma
                        ['#7a5aa0', '#664B9E'],
                        ['#664B9E', '#2E0E4A']
                    ],
                    transitionSpeed: 3000,
                    loop: true
                }
            }
        });


        // --- 3. HELPER LOGIC ---
        // Mobile Height Fix
        const setAppHeight = () => {
            document.documentElement.style.setProperty('--app-height', `${window.innerHeight}px`);
        };
        window.addEventListener('resize', setAppHeight);
        setAppHeight();

        // Reveal Animation
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal-element').forEach(el => observer.observe(el));

        // Blur & Scroll Indicator
        const blurLayer = document.getElementById('blur-layer');
        const scrollIndicator = document.getElementById('scroll-indicator-container');
        let hasScrolled = false;

        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;

            if (!hasScrolled && scrollY > 50) {
                scrollIndicator.style.opacity = '0';
                hasScrolled = true;
            }

            const maxBlur = 16;
            const trigger = window.innerHeight * 0.6;
            let val = (scrollY / trigger) * maxBlur;
            if (val > maxBlur) val = maxBlur;

            blurLayer.style.backdropFilter = `blur(${val}px)`;
            blurLayer.style.webkitBackdropFilter = `blur(${val}px)`;
        });

    </script>
</body>
</html>
