<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Status Co. | Contemporary Artifacts</title>
    
    <!-- Spline Viewer Script -->
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.39/build/spline-viewer.js"></script>
    
    <!-- Granim.js (CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/granim/2.0.0/granim.min.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* Kaydırma yok */
            width: 100%;
            height: 100vh;
            background-color: #b6a5d0; /* Granim yüklenene kadar görünen renk */
        }

        /* 1. GRANIM CANVAS */
        #canvas-basic {
            position: absolute;
            display: block;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -2; /* En arkada */
        }

        /* 2. SPLINE LAYER */
        #canvas-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            height: var(--app-height, 100vh);
            z-index: 1; 
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none; /* Mouse olaylarını canvas'a/granim'e geçirmesin */
        }

        spline-viewer {
            width: 100%;
            height: 100%;
            display: block;
            pointer-events: auto; /* Modeli döndürmek için açık */
        }

        /* !!! MOBİL FIX GERİ GETİRİLDİ !!! 
           Modelin ekrandan taşmasını veya çok büyük görünmesini engeller.
        */
        @media (max-width: 768px) {
            #canvas-layer {
                /* Genişliği %180 yaparak sahneyi yataymış gibi kandırıyoruz */
                width: 180% !important;
                height: var(--app-height, 100vh) !important;
                
                /* Ortala ve Küçült */
                left: 50% !important;
                transform: translateX(-50%) scale(0.6) !important; 
                transform-origin: center center;
            }
        }
        
        spline-viewer::part(logo) {
            display: none;
        }
    </style>
</head>
<body>

    <!-- Granim Canvas -->
    <canvas id="canvas-basic"></canvas>

    <!-- 3D Model -->
    <div id="canvas-layer">
        <spline-viewer url="https://prod.spline.design/X-xNpCt05N7o8w7p/scene.splinecode"></spline-viewer>
    </div>

    <script>
        // 1. GRANIM AYARLARI
        var granimInstance = new Granim({
            element: '#canvas-basic',
            direction: 'diagonal', 
            isPausedWhenNotInView: true,
            // HIZ AYARI: 1500'den 300'e düşürüldü (Çok Hızlı)
            stateTransitionSpeed: 300, 
            states : {
                "default-state": {
                    gradients: [
                        ['#b6a5d0', '#625eaa'], // Açık Leylak -> Mor
                        ['#29174d', '#b6a5d0'], // Koyu Mor -> Açık Leylak
                        ['#625eaa', '#29174d'], // Mor -> Koyu Mor
                        ['#b6a5d0', '#b6a5d0']  // Reset
                    ]
                }
            }
        });

        // 2. MOBILE HEIGHT FIX
        let lastWidth = window.innerWidth;
        const setAppHeight = () => {
            const currentWidth = window.innerWidth;
            if (currentWidth !== lastWidth || !document.documentElement.style.getPropertyValue('--app-height')) {
                const doc = document.documentElement;
                doc.style.setProperty('--app-height', `${window.innerHeight}px`);
                lastWidth = currentWidth;
            }
        };

        setAppHeight();
        window.addEventListener('resize', setAppHeight);
    </script>
</body>
</html>
